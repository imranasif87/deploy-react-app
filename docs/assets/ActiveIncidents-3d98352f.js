import{g as j,h as y,s as S,P as D,a as c,k as A,_ as b,l as m,j as t,m as w,o as N,C as G,T as C,e as T,n as k,B as F,L as W}from"./index-bb811758.js";/* empty css                     */import{T as z}from"./TextField-2ebea9c3.js";import{G as I}from"./Grid-66cdcbba.js";import"./OutlinedInput-f4cb9bb1.js";import"./InputBase-2c8f6ab4.js";import"./Select-a03c26b5.js";import"./Input-7ae70adb.js";function O(o){return j("MuiCard",o)}y("MuiCard",["root"]);const Q=["className","raised"],H=o=>{const{classes:e}=o;return N({root:["root"]},O,e)},Z=S(D,{name:"MuiCard",slot:"Root",overridesResolver:(o,e)=>e.root})(()=>({overflow:"hidden"})),q=c.forwardRef(function(e,r){const n=A({props:e,name:"MuiCard"}),{className:g,raised:l=!1}=n,p=b(n,Q),a=m({},n,{raised:l}),d=H(a);return t.jsx(Z,m({className:w(d.root,g),elevation:l?8:void 0,ref:r,ownerState:a},p))}),J=q;function K(o){return j("MuiCardActions",o)}y("MuiCardActions",["root","spacing"]);const V=["disableSpacing","className"],X=o=>{const{classes:e,disableSpacing:r}=o;return N({root:["root",!r&&"spacing"]},K,e)},Y=S("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(o,e)=>{const{ownerState:r}=o;return[e.root,!r.disableSpacing&&e.spacing]}})(({ownerState:o})=>m({display:"flex",alignItems:"center",padding:8},!o.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}})),tt=c.forwardRef(function(e,r){const n=A({props:e,name:"MuiCardActions"}),{disableSpacing:g=!1,className:l}=n,p=b(n,V),a=m({},n,{disableSpacing:g}),d=X(a);return t.jsx(Y,m({className:w(d.root,l),ownerState:a,ref:r},p))}),et=tt;function st(o){return j("MuiCardContent",o)}y("MuiCardContent",["root"]);const ot=["className","component"],nt=o=>{const{classes:e}=o;return N({root:["root"]},st,e)},at=S("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(o,e)=>e.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),rt=c.forwardRef(function(e,r){const n=A({props:e,name:"MuiCardContent"}),{className:g,component:l="div"}=n,p=b(n,ot),a=m({},n,{component:l}),d=nt(a);return t.jsx(at,m({as:l,className:w(d.root,g),ownerState:a,ref:r},p))}),it=rt,f=10,Ct=o=>{const[e,r]=c.useState([]),[n,g]=c.useState([]),[l,p]=c.useState(""),[a,d]=c.useState(0),[R,P]=c.useState(localStorage.getItem("language")||"no"),u=R==="en"?T.incident:k.incident,$=s=>{P(s),localStorage.setItem("language",s)},B=({incident:s})=>{var i;return t.jsxs(J,{variant:"outlined",sx:{height:"100%"},children:[t.jsxs(it,{children:[t.jsxs(C,{sx:{fontSize:14},color:"text.secondary",gutterBottom:!0,children:[u.created,": ",s.createdAt.toLocaleString()]}),t.jsx(C,{variant:"h5",component:"div",children:((i=s.flight)==null?void 0:i.flightNumber)||"Null"}),t.jsx(C,{sx:{mb:1.5},color:"text.secondary",children:s.timeOfIncident.toLocaleString()}),t.jsx(C,{variant:"body2",children:s.description})]}),t.jsx(et,{children:t.jsx(F,{size:"small",component:W,to:`/Test/${s.id}`,children:u.readMore})})]})};c.useEffect(()=>{async function s(){try{const M=await(await fetch("https://wideroeemergencynextofkinapi.azure-api.net/WideroeEmergency/api/Incident")).json();console.log(M);const x=M.map(h=>({id:h.id,flight:{flightNumber:h.flightNumber},createdAt:new Date(h.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}).replace(/\//g,"."),timeOfIncident:new Date(h.timeOfIncident).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}).replace(/\//g,"."),description:h.description,isActive:h.isActive}));r(x),console.log(x[0].isActive,x[1].isActive,x[2].isActive)}catch(i){console.error("Error while fetching incident data:",i)}}s()},[]),c.useEffect(()=>{e.length>0&&g(e)},[e]);const E=s=>{const{value:i}=s.target;p(i),d(0)};n.filter(s=>{var i;return((i=s.flight)==null?void 0:i.flightNumber)&&s.flight.flightNumber.toLowerCase().includes(l.toLowerCase())});const L=Math.ceil(n.length/f),U=a===0,_=a===L-1,v=n.filter(s=>s.isActive).slice(a*f,a*f+f);return t.jsx(G,{navHeader:u.activeIncidents,onLanguageChange:$,children:t.jsxs("div",{className:"SearchField",children:[t.jsx(z,{label:u.search,variant:"outlined",onChange:E,sx:{marginBottom:"2%"}}),t.jsxs("div",{className:"GridWrapper",children:[t.jsx(I,{container:!0,justifyContent:"center",spacing:2,children:v.map(s=>t.jsx(I,{item:!0,sx:{width:"400px"},children:t.jsx(B,{incident:s})},s.id))}),v.filter(s=>s.isActive).length===0&&t.jsxs(C,{variant:"body1",children:[" ",u.notFound]})]}),v.length>f&&t.jsx("div",{className:"ButtonsWrapper",children:t.jsxs("div",{className:"Buttons",children:[t.jsx("button",{disabled:U,onClick:()=>d(a-1),children:u.previous}),t.jsxs("span",{children:[u.page,` ${a+1} av ${L}`]}),t.jsx("button",{disabled:_,onClick:()=>d(a+1),children:u.next})]})})]})})};export{Ct as default};
