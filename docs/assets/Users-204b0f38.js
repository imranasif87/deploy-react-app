import{a as n,j as e,C as U,I as F,e as B,n as H}from"./index-bb811758.js";/* empty css                     */import{d as R}from"./DeleteForever-96f7d9d5.js";import{T as $}from"./TextField-2ebea9c3.js";import{T as z,b as f,c as t,a as Q}from"./TableRow-6e0748be.js";import{T as W}from"./TableHead-9379f5c4.js";import{T as d}from"./TableSortLabel-22828496.js";import"./OutlinedInput-f4cb9bb1.js";import"./InputBase-2c8f6ab4.js";import"./Select-a03c26b5.js";import"./Input-7ae70adb.js";const h=10,ee=_=>{const[x,b]=n.useState([]),[j,C]=n.useState([]),[i,v]=n.useState("asc"),[E,T]=n.useState(""),[o,m]=n.useState(0),[k,w]=n.useState(localStorage.getItem("language")||"no"),r=k==="en"?B.user:H.user,y=s=>{w(s),localStorage.setItem("language",s)};let N=[];n.useEffect(()=>{async function s(){try{const l=(await(await fetch("https://wideroeemergencynextofkinapi.azure-api.net/WideroeEmergency/api/User")).json()).map(c=>({id:c.id,firstName:c.person.firstName,lastName:c.person.lastName,phone:c.person.phone,email:c.person.email,role:c.role}));b(l),N=l}catch(a){console.error("Error while fetching user data:",a)}}s()},[]),n.useEffect(()=>{x.length>0&&C(x)},[x]);const u=s=>{const a=[...N].sort((p,l)=>i==="asc"?p[s]>l[s]?1:-1:p[s]<l[s]?1:-1);C(a),v(i==="asc"?"desc":"asc")},L=s=>{const{value:a}=s.target;T(a),m(0)},g=j.filter(s=>s.firstName.toLowerCase().includes(E.toLowerCase())),S=Math.ceil(j.length/h),D=o===0,I=o===S-1;j.slice(o*h,o*h+h);const P=async s=>{try{await fetch(`https://wideroeemergencynextofkinapi.azure-api.net/WideroeEmergency/api/User/${s}`,{method:"DELETE"}),b(x.filter(a=>a.id!==s))}catch(a){console.error("Error while deleting user:",a)}};return e.jsx(U,{navHeader:r.title,onLanguageChange:y,children:e.jsxs("div",{className:"SearchField",children:[e.jsx($,{label:r.search,variant:"outlined",onChange:L}),e.jsx("div",{className:"IncidentTable",children:e.jsxs(z,{children:[e.jsx(W,{children:e.jsxs(f,{children:[e.jsx(t,{children:e.jsx(d,{active:!0,direction:i,onClick:()=>u("firstName"),children:e.jsxs("h3",{children:[" ",r.firstName," "]})})}),e.jsx(t,{children:e.jsx(d,{active:!0,direction:i,onClick:()=>u("lastName"),children:e.jsxs("h3",{children:[" ",r.lastName," "]})})}),e.jsx(t,{children:e.jsx(d,{active:!0,direction:i,onClick:()=>u("flightNumber"),children:e.jsxs("h3",{children:[" ",r.email," "]})})}),e.jsx(t,{children:e.jsx(d,{active:!0,direction:i,children:e.jsxs("h3",{children:[" ",r.phone," "]})})}),e.jsx(t,{children:e.jsx(d,{active:!0,direction:i,onClick:()=>u("flightNumber"),children:e.jsxs("h3",{children:[" ",r.role," "]})})}),e.jsx(t,{})]})}),e.jsx(Q,{children:g.length>0?g.map(s=>e.jsxs(f,{children:[e.jsx(t,{children:s.firstName}),e.jsx(t,{children:s.lastName}),e.jsx(t,{children:s.email}),e.jsx(t,{children:s.phone}),e.jsx(t,{children:s.role===0?"FÃ¸rstekontakt":s.role===1?"HRK-bruker":""}),e.jsx(t,{children:e.jsx(F,{"aria-label":"delete",color:"secondary",onClick:()=>P(s.id),children:e.jsx(R,{})})})]},s.id)):e.jsx(f,{children:e.jsxs(t,{colSpan:4,children:[r.noUsers,"."]})})}),g.length>h&&e.jsxs("div",{className:"Buttons",children:[e.jsx("button",{disabled:D,onClick:()=>m(o-1),children:r.previous}),e.jsxs("span",{children:[r.page,` ${o+1} av ${S}`]}),e.jsx("button",{disabled:I,onClick:()=>m(o+1),children:r.next})]})]})})]})})};export{ee as default};
