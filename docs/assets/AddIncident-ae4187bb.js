import{a as i,u as L,j as e,C as k,p as w,M as A,L as O,B as E,e as T,n as D}from"./index-bb811758.js";/* empty css                     */import{T as p}from"./TextField-2ebea9c3.js";import{L as N,A as V,D as B}from"./AdapterDayjs-cd1076a7.js";import"./OutlinedInput-f4cb9bb1.js";import"./InputBase-2c8f6ab4.js";import"./Select-a03c26b5.js";import"./Input-7ae70adb.js";import"./Grid-66cdcbba.js";import"./InputAdornment-1cdbe8eb.js";import"./ListItem-ac6be80d.js";const X=z=>{const[s,g]=i.useState(""),[l,m]=i.useState(""),[M,f]=i.useState(null),[d,x]=i.useState([]),[r,v]=i.useState({}),j=L(),[y,b]=i.useState(localStorage.getItem("language")||"no"),n=y==="en"?T.incident:D.incident,C=t=>{b(t),localStorage.setItem("language",t)},[h,F]=i.useState(null),S=t=>{F(t)};i.useEffect(()=>{async function t(){const o=(await(await fetch("https://wideroeemergencynextofkinapi.azure-api.net/WideroeEmergency/api/Flight")).json()).map(u=>({id:u.id,value:u.id,label:u.flightNumber}));f(o),x(o)}t()},[]);const I=async t=>{t.preventDefault();const c=d.find(o=>o.value===s),a={};if(s||(a.flight="Legg inn Flight"),l||(a.description="Legg inn beskrivelse"),Object.keys(a).length>0){v(a);return}c&&(await fetch(`https://wideroeemergencynextofkinapi.azure-api.net/WideroeEmergency/api/Incident/${c.id}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({flight:s,createdAt:new Date,timeOfIncident:h,description:l})}),j("/ActiveIncidents"))};return e.jsx(k,{navHeader:n.title,onLanguageChange:C,children:e.jsx("div",{className:"App",children:e.jsxs("header",{className:"App-header",children:[e.jsx("h1",{children:n.title}),e.jsx(w,{component:"form",sx:{"& .MuiTextField-root":{margin:"15px",width:"600px"}},noValidate:!0,autoComplete:"off",children:e.jsxs("div",{children:[e.jsx(p,{id:"outlined-select-flight",select:!0,label:n.selectFlight,value:s,onChange:t=>g(t.target.value),error:r.flight!==void 0,helperText:r.flight,children:d&&d.map(t=>e.jsx(A,{value:t.value,children:t.label},t.value))}),e.jsx("div",{children:e.jsx(O,{to:"/AddFlight",children:n.newFlight})}),e.jsxs("div",{children:[e.jsx(N,{dateAdapter:V,children:e.jsx(B,{label:n.timeOfIncident,value:h,onChange:S})}),e.jsx("div",{})]}),e.jsx("div",{id:"description",children:e.jsx(p,{id:"outlined-multiline-static",label:n.descriptionOfIncident,multiline:!0,rows:10,value:l,onChange:t=>m(t.target.value),error:r.description!==void 0,helperText:r.description})}),e.jsx("div",{children:e.jsx(E,{id:"addincidentHRK",onClick:I,style:{backgroundColor:"#369E3B",color:"black"},type:"button",children:n.register})})]})})]})})})};export{X as default};
